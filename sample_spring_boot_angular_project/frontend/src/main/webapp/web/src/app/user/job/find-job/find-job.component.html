<zu-header></zu-header>

<zu-intro-header [title]="getPageTitleByActiveTab(pagination.activeTab)" [titleSize]="'L'" [background]="3"></zu-intro-header>

<section class="flex main-height admin-page-backgroud">
  <mat-card class="full-width">
    <mat-card-content class="main-content-padding container container__filter-tab">

      <zu-job-filters *ngIf="isActiveTab(findJobTabEnum.AVAILABLE_JOBS)"
                      (changeOptions)="updateFilterOptions($event)"
                      (initOptions)="setFilterOptions($event);getAvilableJobIfSortAndFilterReady()"></zu-job-filters>

      <zu-job-sort class="container-sort"
                   *ngIf="isActiveTab(findJobTabEnum.AVAILABLE_JOBS)"
                   (changeOptions)="updateSortOptions($event)"
                   (initOptions)="setSortOptions($event);getAvilableJobIfSortAndFilterReady()"></zu-job-sort>

      <mat-tab-group [@.disabled]="true"
                     (selectedTabChange)="changeTab($event);scrollToTop();changeQueryParamsByTab($event)"
                     [selectedIndex]="getTabIndexFromQuery()">
        <mat-tab [label]="findJobTabEnum.AVAILABLE_JOBS">
          <div class="job-info-box flex-align-center flex-justify-space-center"
               *ngIf="!(getJobListByTab(findJobTabEnum.AVAILABLE_JOBS)?.length > 0)">
            <label class="label mt-24 top-label" [hidden]="isRequestInProgress">No available jobs</label>
            <label class="label mt-24 top-label" [hidden]="!isRequestInProgress">Loading...</label>
          </div>

          <ul class="job-box list-unstyled">
            <li class="job-box--item" *ngFor="let job of getJobListByTab(findJobTabEnum.AVAILABLE_JOBS)">
              <zu-job-summary [job]="job" [ownershipType]="ownershipTypeEnum.VIEWER" [hideApplicants]="true"></zu-job-summary>
            </li>
          </ul>
        </mat-tab>

        <mat-tab [label]="findJobTabEnum.MY_APPLICATIONS">
          <div class="job-info-box flex-align-center flex-justify-space-center"
               *ngIf="!(getJobListByTab(findJobTabEnum.MY_APPLICATIONS)?.length > 0)">
            <label class="label mt-24 top-label" [hidden]="isRequestInProgress">No new jobs</label>
            <label class="label mt-24 top-label" [hidden]="!isRequestInProgress">Loading...</label>
          </div>

          <ul class="job-box list-unstyled">
            <li class="job-box--item" *ngFor="let job of getJobListByTab(findJobTabEnum.MY_APPLICATIONS)">
              <zu-job-summary [job]="job"
                              [ownershipType]="ownershipTypeEnum.APPLICANT"
                              [hideApplicants]="true"
                              [active]="job.ownershipType === ownershipTypeEnum.CHOSEN_APPLICANT">
              </zu-job-summary>
            </li>
          </ul>
        </mat-tab>

        <mat-tab [label]="findJobTabEnum.ACTIVE_JOBS">
          <div class="job-info-box flex-align-center flex-justify-space-center"
               *ngIf="!(getJobListByTab(findJobTabEnum.ACTIVE_JOBS)?.length > 0)">
            <label class="label mt-24 top-label" [hidden]="isRequestInProgress">No active jobs</label>
            <label class="label mt-24 top-label" [hidden]="!isRequestInProgress">Loading...</label>
          </div>

          <ul class="job-box list-unstyled">
            <li class="job-box--item" *ngFor="let job of getJobListByTab(findJobTabEnum.ACTIVE_JOBS)">
              <zu-job-summary [job]="job"
                              [ownershipType]="ownershipTypeEnum.SHOOTER"
                              [hideApplicants]="true"
                              [askQuestion]="true"
                              [active]="job.status === jobStatusEnum.IN_PROGRESS">
              </zu-job-summary>
            </li>
          </ul>
        </mat-tab>

        <mat-tab [label]="findJobTabEnum.ARCHIVED_JOBS">
          <div class="job-info-box flex-align-center flex-justify-space-center"
               *ngIf="!(getJobListByTab(findJobTabEnum.ARCHIVED_JOBS)?.length > 0)">
            <label class="label mt-24 top-label" [hidden]="isRequestInProgress">No archived jobs</label>
            <label class="label mt-24 top-label" [hidden]="!isRequestInProgress">Loading...</label>
          </div>

          <ul class="job-box list-unstyled">
            <li class="job-box--item" *ngFor="let job of getJobListByTab(findJobTabEnum.ARCHIVED_JOBS)">
              <zu-job-summary [job]="job" [ownershipType]="ownershipTypeEnum.SHOOTER" [hideApplicants]="true"></zu-job-summary>
            </li>
          </ul>
        </mat-tab>
      </mat-tab-group>

      <div class="mt-36 flex flex-justify-space-center" *ngIf="showButtonMoreJobs(pagination.activeTab)">
        <button class="button-upload-more" (click)="uploadMoreJob(pagination.activeTab)">
          <span class="button-upload-more__text">MORE JOBS</span>
          <i class="material-icons field-uploaded-close" [hidden]="!isRequestInProgress">
            <mat-spinner class="grey" [diameter]="18" [strokeWidth]="1.5" [value]="50" mode="indeterminate"></mat-spinner>
          </i>
        </button>
      </div>

    </mat-card-content>
  </mat-card>
</section>
